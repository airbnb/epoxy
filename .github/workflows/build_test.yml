name: Build/Test

on:
  # Trigger on every pull request
  pull_request:
jobs:
  build-test:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout epoxy
        uses: actions/checkout@v2
      - name: Build / Unit tests / Lint
        run: "./gradlew check --stacktrace"
      - name: Run UI Tests
        uses: reactivecircus/android-emulator-runner@v2
        with:
          api-level: 21
          target: default
          arch: arm64-v8a
          emulator-options: -no-skin -no-window
          script: ./gradlew :epoxy-composeinterop-maverickssample:connectedDebugAndroidTest --stacktrace
